<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>å¾®ä¿¡å°ç¨‹åºè·³è½¬Appæ—¶ï¼Œapp-parameterä¿¡æ¯çš„ä¼ é€’ç ”ç©¶ | zld</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="å¾®ä¿¡å°ç¨‹åºè·³è½¬Appæ—¶ï¼Œapp-parameterä¿¡æ¯çš„ä¼ é€’ç ”ç©¶" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="é—®é¢˜æè¿°" />
<meta property="og:description" content="é—®é¢˜æè¿°" />
<link rel="canonical" href="http://zhulida.com/ios/2019/03/26/wechat-miniprogram-jump-to-app.html" />
<meta property="og:url" content="http://zhulida.com/ios/2019/03/26/wechat-miniprogram-jump-to-app.html" />
<meta property="og:site_name" content="zld" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-26T16:28:29+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="å¾®ä¿¡å°ç¨‹åºè·³è½¬Appæ—¶ï¼Œapp-parameterä¿¡æ¯çš„ä¼ é€’ç ”ç©¶" />
<script type="application/ld+json">
{"url":"http://zhulida.com/ios/2019/03/26/wechat-miniprogram-jump-to-app.html","dateModified":"2019-03-26T16:28:29+08:00","datePublished":"2019-03-26T16:28:29+08:00","headline":"å¾®ä¿¡å°ç¨‹åºè·³è½¬Appæ—¶ï¼Œapp-parameterä¿¡æ¯çš„ä¼ é€’ç ”ç©¶","mainEntityOfPage":{"@type":"WebPage","@id":"http://zhulida.com/ios/2019/03/26/wechat-miniprogram-jump-to-app.html"},"description":"é—®é¢˜æè¿°","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://zhulida.com/feed.xml" title="zld" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">zld</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">å¾®ä¿¡å°ç¨‹åºè·³è½¬Appæ—¶ï¼Œapp-parameterä¿¡æ¯çš„ä¼ é€’ç ”ç©¶</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-03-26T16:28:29+08:00" itemprop="datePublished">Mar 26, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h2>

<p>å¾®ä¿¡çš„å°ç¨‹åºåœ¨è·³è½¬Appæ—¶ï¼Œæ˜¯å¯ç”¨é€šè¿‡<code class="language-plaintext highlighter-rouge">app-parameter</code>æ¥ä¼ é€’ä¸€äº›é¢å¤–ä¿¡æ¯</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">open</span><span class="o">-</span><span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">launchApp</span><span class="dl">"</span> <span class="nx">app</span><span class="o">-</span><span class="nx">parameter</span><span class="o">=</span><span class="dl">"</span><span class="s2">additionalInfoxxxxx</span><span class="dl">"</span> <span class="nx">binderror</span><span class="o">=</span><span class="dl">"</span><span class="s2">launchAppError</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">æ‰“å¼€APP</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span></code></pre></div></div>

<p>ä½†æˆ‘ä»¬åœ¨ <code class="language-plaintext highlighter-rouge">AppDelegate</code> ä¸­çš„ <code class="language-plaintext highlighter-rouge">- (BOOL)application:openURL:sourceApplication:annotation:</code> ä¸­æ‰“æ–­ç‚¹åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰æ²¡ä»€ä¹ˆä¿¡æ¯é‡çš„urlå’Œä¸ºnilçš„annotationï¼š</p>

<p><img src="/media//15535935678385.jpg" alt="-w406" /></p>

<p>urlçš„schemeä¸ºAppæ³¨å†Œçš„å›ºå®šçš„å¾®ä¿¡schemeï¼Œannotationä¸ºnilï¼Œå¯è§æ²¡æœ‰ä»»ä½•å…¶ä»–æ¶ˆæ¯</p>

<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŒ‰ç…§å¾®ä¿¡çš„æ–‡æ¡£æ¥å®ç°è·å–å‚æ•°ï¼š</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">BOOL</span> <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">WXApi</span> <span class="nf">handleOpenURL</span><span class="p">:</span><span class="n">url</span> <span class="nf">delegate</span><span class="p">:[</span><span class="n">WechatSDKDelegate</span> <span class="nf">sharedInstance</span><span class="p">]];</span>
</code></pre></div></div>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// WechatSDKDelegate</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onReq</span><span class="p">:(</span><span class="n">BaseReq</span><span class="o">*</span><span class="p">)</span><span class="nv">req</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">([</span><span class="n">req</span> <span class="nf">isKindOfClass</span><span class="p">:[</span><span class="n">LaunchFromWXReq</span> <span class="nf">class</span><span class="p">]])</span> <span class="p">{</span>
        <span class="n">LaunchFromWXReq</span> <span class="o">*</span><span class="n">launchReq</span> <span class="o">=</span> <span class="n">req</span><span class="p">;</span>
        <span class="n">NSString</span> <span class="o">*</span><span class="n">appParameter</span> <span class="o">=</span> <span class="n">launchReq</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="n">messageExt</span><span class="p">;</span>
        <span class="c1">// do sth bellow</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ <code class="language-plaintext highlighter-rouge">onReq:</code> ç«Ÿç„¶èƒ½å–åˆ°ç»“æ„å¾ˆå¤æ‚çš„ <code class="language-plaintext highlighter-rouge">req</code>ï¼Œè€Œ <code class="language-plaintext highlighter-rouge">req.message.messageExt</code> å°±æ˜¯æˆ‘ä»¬ä»å°ç¨‹åºä¸­ä¼ è¿‡æ¥çš„ <code class="language-plaintext highlighter-rouge">app-parameter</code>ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†ä¸€ä¸ªå¾ˆç®€çŸ­çš„urlï¼Œæ²¡æœ‰ä»»ä½•å…¶ä»–ä¿¡æ¯äº†ï¼Œè¿™ä¸ª <code class="language-plaintext highlighter-rouge">messageExt</code> çš„å†…å®¹æ˜¯ä»å“ªé‡Œè·å–çš„å‘¢ï¼Ÿ</p>

<h2 id="çŒœæµ‹">çŒœæµ‹</h2>

<p>ç»è¿‡å’ŒåŒäº‹è®¨è®ºï¼ŒçŒœæµ‹äº†å‡ ç§å¯èƒ½æ€§ï¼š</p>

<ol>
  <li>å¯èƒ½æ˜¯å¾®ä¿¡SDKå‘äº†ä¸ªç½‘ç»œè¯·æ±‚æ¥å¤„ç†è¿™ä¸ªäº‹æƒ…ã€‚ä½†æŠ“åŒ…åå¹¶æ²¡æœ‰</li>
  <li>å¾®ä¿¡å‘ç›®æ ‡Appä¸­çš„è¿›ç¨‹åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚ä½†iOSçš„ä¿æŠ¤æœºåˆ¶åº”è¯¥æ²¡é‚£ä¹ˆå®¹æ˜“åšåˆ°ï¼Œèµ·ç ç›®å‰æ²¡æƒ³åˆ°å¯ä»¥ç»•å¼€æƒé™çš„</li>
  <li>Appé—´è¿›è¡Œsocketé€šä¿¡ï¼Œä½†è€ƒè™‘åˆ°éœ€è¦èµ·æœåŠ¡ã€ä¿æ´»ç­‰å› ç´ æ„Ÿè§‰ä¹Ÿä¸æ˜¯å¤ªå¯èƒ½</li>
</ol>

<h2 id="è°ƒæŸ¥">è°ƒæŸ¥</h2>

<p>æ²¡åŠæ³•äº†ï¼Œåªèƒ½å»è°ƒæŸ¥ä¸‹SDKçš„é™æ€åº“äº†ï¼Œç”¨Hopperæ‰“å¼€åï¼Œçœ‹äº†å‡ ä¸ªç±»çš„æ–¹æ³•åï¼Œç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªæ–¹æ³•æ„Ÿè§‰å¾ˆåƒï¼Œå¹¶ä¸”ç»™äººè±ç„¶å¼€æœ—çš„æ„Ÿè§‰ã€‚</p>

<p><img src="/media//15535958910573.jpg" alt="-w1679" /></p>

<p>å°±æ˜¯è¿™ä¸ª <code class="language-plaintext highlighter-rouge">[WXOMTAOpenUDID _getDictFromPasteboard:]</code> æ–¹æ³•ï¼</p>

<p>æœ‰æ„æ€ï¼ŒçŒœæµ‹å¯ä»¥é€šè¿‡å‰ªåˆ‡æ¿å°†éœ€è¦çš„ä¿¡æ¯ä¼ é€’è¿‡æ¥ï¼Œåœ¨Appä¸­è·å–åå†åšå¥½å¤„ç†å°±OKäº†ã€‚é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥å°±æ˜¯éªŒè¯äº†ã€‚</p>

<p>æˆ‘å°† <code class="language-plaintext highlighter-rouge">app-parameter</code> ä¸­çº¿ä¼ æ•°æ®Aä¸¤æ¬¡ï¼Œç„¶åä¼ ä¸€æ¬¡æ•°æ®Bï¼Œæœ€åå†ä¼ ä¸€æ¬¡Aï¼Œç„¶åæˆ‘åœ¨Appä¸­å¯ä»¥ä»å‰ªåˆ‡æ¿ä¸­( <code class="language-plaintext highlighter-rouge">[UIPasteboard generalPasteboard].items[0][@"context"]</code> )è·å–åˆ°ä»¥ä¸‹çš„æ•°æ®ï¼š</p>

<p><img src="/media//15535967774203.jpg" alt="-w914" /></p>

<p>å¯ä»¥çœ‹å‡ºï¼Œç¬¬ 1ã€2ã€4çš„å‰ªåˆ‡æ¿æ•°æ®æ˜¯ä¸€æ ·çš„ï¼Œç¬¬3æ¬¡ä¸ä¸€æ ·ã€‚è¿™é‡Œå°±å¯ä»¥çŒœæµ‹å‡ºæ¥çš„ç¡®æ˜¯ç”¨çš„å‰ªåˆ‡æ¿äº†ğŸ˜†</p>

<p>ä¸‹é¢å°†æ•°æ®è½¬æ¢ä¸€ä¸‹ï¼š</p>

<p><img src="/media//15535965424547.jpg" alt="-w549" /></p>

<p>è¢«åœˆå‡ºæ¥çš„åœ°æ–¹å°±æ˜¯æˆ‘ä¹‹å‰å°ç¨‹åºä¸­ <code class="language-plaintext highlighter-rouge">app-parameter</code> ä¸­ä¼ è¿‡æ¥çš„å€¼ã€‚</p>

<p>OKï¼Œç ´æ¡ˆã€‚</p>

  </div><a class="u-url" href="/ios/2019/03/26/wechat-miniprogram-jump-to-app.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">zld</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">zld</li><li><a class="u-email" href="mailto:zhu.lida.cn@gmail.com">zhu.lida.cn@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/zld"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">zld</span></a></li><li><a href="https://www.twitter.com/Zhu_Lida"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">Zhu_Lida</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Just a Blog</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
